{"version":3,"sources":["webpack:///./templates/imagelist.hbs","webpack:///./js/apiService.js","webpack:///./index.js"],"names":["Handlebars","module","exports","template","container","depth0","helpers","partials","data","helper","alias1","nullContext","alias2","hooks","helperMissing","alias3","alias4","escapeExpression","lookupProperty","parent","propertyName","Object","prototype","hasOwnProperty","call","stack1","program","noop","getImages","searchQuery","page","API_KEY","url","BASE_URL","fetch","imageList","json","console","warn","defaultModules","set","PNotifyMobile","debounce","require","refs","document","querySelector","event","target","value","makeImageListMarkup","markup","sendErrorMessage","includes","loadMore","removeAttribute","gallery","innerHTML","buttonCoordinatesY","pageY","setAttribute","insertAdjacentHTML","setTimeout","window","scrollTo","top","left","behavior","response","images","hits","makeImageListTpl","title","text","error","type","delay","sticker","inputField","addEventListener","preventDefault","className","newLink","dataset","largeimageurl","newAlt","alt","newImgMarkup","modal","classList","add","firFullsizeImg","modalCloseBtn","remove"],"mappings":"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","file":"main.78ac59605f896b2e6157.js","sourcesContent":["var Handlebars = require(\"../../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"1\":function(container,depth0,helpers,partials,data) {\n    var helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=container.hooks.helperMissing, alias3=\"function\", alias4=container.escapeExpression, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<li class=\\\"gallery-list_item\\\">\\r\\n    <div class=\\\"photo-card\\\">\\r\\n        <a href=\\\"\\\">\\r\\n            <img src=\\\"\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"webformatURL\") || (depth0 != null ? lookupProperty(depth0,\"webformatURL\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"webformatURL\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":5,\"column\":22},\"end\":{\"line\":5,\"column\":38}}}) : helper)))\n    + \"\\\" alt=\\\"\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"tags\") || (depth0 != null ? lookupProperty(depth0,\"tags\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"tags\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":5,\"column\":45},\"end\":{\"line\":5,\"column\":53}}}) : helper)))\n    + \"\\\" class=\\\"photo-card_image\\\"\\r\\n                data-largeImageURL=\\\"\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"largeImageURL\") || (depth0 != null ? lookupProperty(depth0,\"largeImageURL\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"largeImageURL\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":6,\"column\":36},\"end\":{\"line\":6,\"column\":53}}}) : helper)))\n    + \"\\\" />\\r\\n        </a>\\r\\n\\r\\n        <div class=\\\"stats\\\">\\r\\n            <p class=\\\"stats-item\\\">\\r\\n                <i class=\\\"material-icons\\\">thumb_up</i>\\r\\n                \"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"likes\") || (depth0 != null ? lookupProperty(depth0,\"likes\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"likes\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":12,\"column\":16},\"end\":{\"line\":12,\"column\":25}}}) : helper)))\n    + \"\\r\\n            </p>\\r\\n            <p class=\\\"stats-item\\\">\\r\\n                <i class=\\\"material-icons\\\">visibility</i>\\r\\n                \"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"views\") || (depth0 != null ? lookupProperty(depth0,\"views\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"views\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":16,\"column\":16},\"end\":{\"line\":16,\"column\":25}}}) : helper)))\n    + \"\\r\\n            </p>\\r\\n            <p class=\\\"stats-item\\\">\\r\\n                <i class=\\\"material-icons\\\">comment</i>\\r\\n                \"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"comments\") || (depth0 != null ? lookupProperty(depth0,\"comments\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"comments\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":20,\"column\":16},\"end\":{\"line\":20,\"column\":28}}}) : helper)))\n    + \"\\r\\n            </p>\\r\\n            <p class=\\\"stats-item\\\">\\r\\n                <i class=\\\"material-icons\\\">cloud_download</i>\\r\\n                \"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"downloads\") || (depth0 != null ? lookupProperty(depth0,\"downloads\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"downloads\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":24,\"column\":16},\"end\":{\"line\":24,\"column\":29}}}) : helper)))\n    + \"\\r\\n            </p>\\r\\n        </div>\\r\\n    </div>\\r\\n</li>\\r\\n\";\n},\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return ((stack1 = lookupProperty(helpers,\"each\").call(depth0 != null ? depth0 : (container.nullContext || {}),depth0,{\"name\":\"each\",\"hash\":{},\"fn\":container.program(1, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":1,\"column\":0},\"end\":{\"line\":29,\"column\":9}}})) != null ? stack1 : \"\");\n},\"useData\":true});","\r\nexport default async function getImages(searchQuery, page, API_KEY) {\r\n    const BASE_URL = \"https://pixabay.com/api/\";\r\n    const url = `${BASE_URL}?image_type=photo&orientation=horizontal&q=${searchQuery}&page=${page}&per_page=12&key=${API_KEY}`;\r\n\r\n    try {\r\n        const imageList = await fetch(url);\r\n        return await imageList.json();\r\n    } catch (error) {\r\n        console.warn(\"Ошибка сервиса, пожалуйста, попробуйте сделать запрос позже.\")\r\n        return \"error\"\r\n    }\r\n    \r\n}\r\n","import './styles.css';\nimport './pnotifyStyles.css';\nimport \"../node_modules/@pnotify/core/dist/PNotify.css\";\nimport \"../node_modules/@pnotify/core/dist/BrightTheme.css\";\n\nimport getImages from \"./js/apiService.js\";\nimport makeImageListTpl from \"./templates/imagelist.hbs\";\nimport { error, defaultModules } from'@pnotify/core';\nimport * as PNotifyMobile from '../node_modules/@pnotify/mobile/dist/PNotifyMobile.js';\n\ndefaultModules.set(PNotifyMobile, {});\n\nconst debounce = require('lodash.debounce');\nconst API_KEY = \"21313402-781cc09b241e8b58cb3e12855\";\n\n\nlet page;\nlet searchQuery;\n\nconst refs = {\n    \"inputField\": document.querySelector(\".search-form\"),\n    \"gallery\": document.querySelector(\".gallery\"),\n    \"loadMore\": document.querySelector(\".loadMore-btn\"),\n    \"modal\": document.querySelector(\".modal\"),\n    \"body\": document.querySelector(\"body\"),\n    \"modalCloseBtn\": document.querySelector(\".close-modal\"),\n    \"firFullsizeImg\": document.querySelector(\".for-fullsize-img\"),\n}\n\nrefs.inputField.addEventListener(\"input\", debounce(onInput, 500))\nrefs.loadMore.addEventListener(\"click\", onLoadMore)\nrefs.gallery.addEventListener(\"click\", onImageClick)\nrefs.modalCloseBtn.addEventListener(\"click\", onCloseModalClick)\n\n\nasync function onInput(event) {\n    page = 1;\n    searchQuery = event.target.value;\n    const markup = await makeImageListMarkup(searchQuery, page, API_KEY);\n\n    if (markup === \"\") {\n        sendErrorMessage(\"I can't find anything.\", \"Maybe you missspelled something, try again.\");\n        return\n    } else if (!markup.includes(\"technical error\")) {\n        refs.loadMore.removeAttribute(\"hidden\")\n    }\n\n    refs.gallery.innerHTML = markup;\n    \n}\n\nasync function onLoadMore(event) {\n    page += 1;\n    const markup = await makeImageListMarkup(searchQuery, page, API_KEY);\n    const buttonCoordinatesY = event.pageY\n\n    if (markup === \"\") {\n        sendErrorMessage(\"I can't find anything.\", \"You've got all the images I have.\");\n        refs.loadMore.setAttribute(\"hidden\", true)\n        return\n    }\n\n    refs.gallery.insertAdjacentHTML(\"beforeend\", markup);\n\n    setTimeout(() => {\n        window.scrollTo({\n        top: buttonCoordinatesY,\n        left: 0,\n        behavior: 'smooth'\n    });\n    }, 500);\n    \n}\n\nasync function makeImageListMarkup (searchQuery, page, API_KEY) {\n    const response = await getImages(searchQuery, page, API_KEY);\n    if (response === \"error\") {\n        sendErrorMessage(\"Service error\", \"Sorry, I can't send you any image now, try gain later, please.\")\n        return '<img src=\"https://i.pinimg.com/originals/96/f2/bb/96f2bb94fcc9d64ca1fba04a1cf45a5e.png\" alt=\"technical error\" class=\"error-img\"/>'\n    }\n    const images = response.hits;\n    const markup = makeImageListTpl(images);\n    return markup;\n}\n\nfunction onImageClick(event) {\n    event.preventDefault();\n    const target = event.target;\n    const targetClass = target.className;\n    if (targetClass === \"photo-card_image\") {\n        const newLink = target.dataset.largeimageurl;\n        const newAlt = target.alt;\n\n        const newImgMarkup = `<img src=\"${newLink}\" alt=\"${newAlt}\" class=\"modal-image_fullsize\">`\n        refs.modal.classList.add(\"is-open\");\n        refs.firFullsizeImg.innerHTML = newImgMarkup;\n    }\n}\n\nfunction onCloseModalClick() {\n    refs.modal.classList.remove(\"is-open\");\n}\n\nfunction sendErrorMessage(title, text) {\n    error({\n        title: title,\n        text: text,\n        type: 'error',\n        delay: 3000,\n        sticker: false,\n\n    });\n}"],"sourceRoot":""}